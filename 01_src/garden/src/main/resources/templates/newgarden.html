<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nová zahrada</title>

     <link rel="stylesheet" th:href="@{/styles/style.css}">
    <link rel="stylesheet" th:href="@{/styles/mobile.css}">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body class="home">

<div class="form-container">

    <a class="close-form-btn" th:href="@{/home}">
        <i class='bx bx-x'></i>
    </a>

    <h1>Vytvořit novou zahradu</h1>

    <form th:action="@{/garden/add}" th:object="${gardenDTO}" method="post" enctype="multipart/form-data">
        <div class="form-content">
    <!--        <form th:action="@{/garden/add}" th:object="${gardenDTO}" method="post" enctype="multipart/form-data">-->

                <!-- Image -->
                <div class="image-upload-card">
                    <label for="garden-image" class="upload-area" style="cursor: pointer;">
                        <input type="file" id="garden-image" name="file" accept="image/*" style="display: none;">

                        <div class="preview-container">
                            <img class="image-preview" src="#" alt="Preview" style="display: none;">
                            <div class="upload-placeholder">
                                <i class='bx bx-image-add'></i>
                                <p>Přidat fotografii zahrady</p>
                            </div>
                        </div>
                    </label>
                </div>

                <!-- INPUTS FORM -->
                <div class="form-fields">

                    <div class="input-box">
                        <input type="text" placeholder="Název zahrady" th:field="*{name}" required>
                        <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="error"></div>
                    </div>


                    <div class="input-box">
                        <input type="number" placeholder="Plocha (m2)" th:field="*{areaGarden}" required min="1" step="0.01">
                        <div th:if="${#fields.hasErrors('areaGarden')}" th:errors="*{areaGarden}" class="error"></div>
                    </div>


                    <div class="input-box">
                        <input type="text" placeholder="Město" th:field="*{address.city}" required>
                        <div th:if="${#fields.hasErrors('address.city')}" th:errors="*{address.city}" class="error"></div>
                    </div>


                    <div class="address-row">
                        <div class="input-box">
                            <input type="text" placeholder="Ulice" th:field="*{address.street}" required>
                            <div th:if="${#fields.hasErrors('address.street')}" th:errors="*{address.street}" class="error"></div>
                        </div>
                        <div class="input-box">
                            <input type="text" placeholder="Číslo domu" th:field="*{address.houseNumber}" required>
                            <div th:if="${#fields.hasErrors('address.houseNumber')}" th:errors="*{address.houseNumber}" class="error"></div>
                        </div>
                        <div class="input-box">
                            <input type="text" placeholder="PSČ" th:field="*{address.zipCode}" required>
                            <div th:if="${#fields.hasErrors('address.zipCode')}" th:errors="*{address.zipCode}" class="error"></div>
                        </div>
                    </div>


                    <div th:if="${error}" class="error" th:text="${error}"></div>


                    <button type="submit" class="btn">Vytvořit</button>
        <!--        </form>-->
                </div>
        </div>
    </form>

</div>

<!-- Скрипт для предпросмотра изображения -->
<script>
    const imageInput = document.getElementById('garden-image');
    const imagePreview = document.querySelector('.image-preview');
    const placeholder = document.querySelector('.upload-placeholder');

    imageInput.addEventListener('change', function () {
        const file = imageInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                imagePreview.src = e.target.result;
                imagePreview.style.display = 'block';
                placeholder.style.display = 'none';
            };
            reader.readAsDataURL(file);
        }
    });
</script>

</body>
</html>